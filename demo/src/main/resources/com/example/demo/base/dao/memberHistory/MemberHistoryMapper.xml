<?xml version="1.0"  encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.base.dao.memberHistory.MemberHistoryDao">
    <resultMap id="memberHistory" type="com.example.demo.base.dao.memberHistory.MemberHistoryDto">
        <result column="MEMBER_ID" property="memberId"/>
        <result column="MEMBER_NAME" property="memberName"/>
        <result column="PRODUCT_ID" property="productId"/>
        <result column="PRODUCT_NAME" property="productName"/>
        <result column="PRODUCT_PRICE" property="productPrice"/>
        <result column="PRODUCT_TYPE" property="productType"/>
        <result column="SALE_DAY" property="saleDay"/>
        <result column="EMPLOYEE_ID" property="employeeId"/>
        <result column="EMPLOYEE_NAME" property="employeeName"/>
    </resultMap>

    <select id="selectMemberHistory" resultMap="memberHistory">
        SELECT
        MEMBER_ID,
        MEMBER_NAME,
        PRODUCT_ID,
        PRODUCT_NAME,
        PRODUCT_PRICE,
        PRODUCT_TYPE,
        SALE_DAY,
        EMPLOYEE_ID,
        EMPLOYEE_NAME
        FROM
        MEMBER_HISTORY
        WHERE
        MEMBER_ID = #{memberId}
    </select>

    <insert id="insertOne" parameterType="com.example.demo.base.domain.memberHistory.MemberHistoryForm">
        INSERT INTO MEMBER_HISTORY(
        MEMBER_ID,
        MEMBER_NAME,
        PRODUCT_ID,
        PRODUCT_NAME,
        PRODUCT_PRICE,
        PRODUCT_TYPE,
        SALE_DAY,
        EMPLOYEE_ID,
        EMPLOYEE_NAME
        )
        VALUES(
        #{memberId},
        #{memberName},
        #{productId},
        #{productName},
        #{productPrice},
        #{productType},
        CURRENT_TIMESTAMP(),
        #{employeeId},
        #{employeeName}
        )
    </insert>
</mapper>